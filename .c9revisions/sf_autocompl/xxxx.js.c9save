{"ts":1349162083078,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<head>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css\"\n    />\n    <script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\"></script>\n    <script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js\"></script>\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js\"></script>\n</head>\n<script type=\"text/javascript\">\n    $(function() {\n\n        var sid = _.find(document.cookie.split('; '), function(c) {\n            return c.substring(0, 3) == \"sid\";\n        });\n\n        console.log(sid);\n        console.log($(\"#con4\"));\n\n\n        var cache = {}, lastXhr;\n\n        $(\"#con4\").autocomplete({\n            minLength: 2,\n            focus: function(event, ui) {\n                console.log(ui.item);\n                $(\"#con4\").val(ui.item.label);\n                return false;\n            },\n\n            select: function(event, ui) {\n                $(\"#con4\").val(ui.item.label);\n                $(\"#con4_lkid\").val(ui.item.value);\n\n                return false;\n            },\n\n\n            source: function(request, response) {\n                console.log('req');\n\n                var term = request.term;\n                if (term in cache) {\n                    response(cache[term]);\n                    return;\n                }\n\n                this.tourRequest = $.ajax({\n                    url: \"/services/proxy\",\n                    type: \"GET\",\n                    dataType: \"json\",\n                    context: this,\n                    headers: {\n                        'SalesforceProxy-Endpoint': 'https://na11.salesforce.com/services/data/v25.0/search?q=FIND+{' + request.term + '*}+IN+ALL+FIELDS+RETURNING+ACCOUNT(Id,Name)',\n                        'Authorization': 'OAuth ' + sid.split('=')[1]\n                    }\n                });\n\n                this.tourRequest.done(function(allSearchResults) {\n                    console.log(allSearchResults);\n                    var data = [];\n                    for (i = 0; i < allSearchResults.length; i++) {\n                        data.push({\n                            label: allSearchResults[i].Name,\n                            value: allSearchResults[i].Id\n                        });\n                        console.log(allSearchResults[i].Id);\n                    }\n\n                    response(data);\n                });\n\n                this.tourRequest.fail(function(jqXHR, textStatus) {\n                    console.log(\"Request failed: \" + textStatus + \"could not load tours\");\n                });\n            }\n        });\n\n    });\n</script>"]],"start1":0,"start2":0,"length1":0,"length2":2758}]],"length":2758}
