{"ts":1349162083064,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$(function() {\n    //$('#callToFrame').parent().parent().show().hide()    \n    \n    $('#callToFrame').parent().click(function() {\n            window.webkitNotifications.requestPermission()\n        });\n    \n    \n    window.webkitNotifications.requestPermission();\n    \n    $('.PhoneNumberElement, #acc10_ileinner, #con10_ileinner, #con12_ileinner, #con13_ileinner, #con14_ileinner')\n        .wrapInner('<nobr title=\"Click2Dial\" class=\"sipgateGCXClick2DialBubble\" />')\n        .append('<img src=\"https://c9.io/tsschnoc/gapps_script_shared/workspace/sf_autocompl/icon_click2dial.gif\" class=\"sipgateGCXClick2DialBubbleIMG\">')\n        .find('img').click(function(){\n            //alert($(this).parent().text());\n            console.log($(this).parent().text());\n            var number = $(this).parent().text().split(' ').join('').replace(\"(\",\"\").replace(\")\",\"\");            \n            console.log(number);\n            var callto = 'phoner://' + escape(number).replace('+', '00');\n            console.log(callto);\n            location.href = callto;            \n        });\n\n\n    window.document.addEventListener('DOMNodeInserted',function(e) {\n         if (e.srcElement.className == 'lookupInput bEditBlock') {\n             console.log($(e.srcElement));\n             console.log($(e.srcElement).find('#con4'));\n             appachUI();\n         }\n         //appachUI();\n    });\n    appachUI();\n\n});\n\nfunction appachUI() {\n//    $('#con9_ileinner').wrapInner('<nobr title=\"sipgate Click2Dial for (650)8677686 (Singapore)\" class=\"sipgateGCXClick2DialBubble\" />').append('<img src=\"https://c9.io/tsschnoc/gapps_script_shared/workspace/sf_autocompl/icon_click2dial.gif\" class=\"sipgateGCXClick2DialBubbleIMG\">')\n    var sid = _.find(document.cookie.split('; '), function(c) {\n        return c.substring(0, 3) == \"sid\";\n    });\n\n    console.log(sid);\n    console.log($(\"#con4\"));\n\n\n    sforce.connection.sessionId=sid.split('=')[1];\n    \n    var cache = {}, lastXhr;\n\n\n\n    $(\"#con4\").autocomplete({\n        minLength: 2,\n        focus: function(event, ui) {\n            console.log(ui.item);\n//            $(\"#con4\").val(ui.item.label);\n            $(this).val(ui.item.label);\n            return false;\n        },\n\n        select: function(event, ui) {\n            $(this).val(ui.item.label);\n//            $(\"#con4\").val(ui.item.label);\n            $(this).parent().parent().find('#' + this.id + '_lkid').val(ui.item.value);\n//            $(\"#con4_lkid\").val(ui.item.value);\n\n            return false;\n        },\n\n\n        source: function(request, response) {\n            console.log('req');\n            \n\n            var term = request.term;\n            if (term in cache) {\n                response(cache[term]);\n                return;\n            }\n\n            this.tourRequest = $.ajax({\n                url: \"/services/proxy\",\n                type: \"GET\",\n                dataType: \"json\",\n                context: this,\n                headers: {\n//                    'SalesforceProxy-Endpoint': 'https://na11.salesforce.com/services/data/v25.0/search?q=FIND+{' + request.term + '*}+IN+ALL+FIELDS+RETURNING+ACCOUNT(Id,Name)',\n                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest?searchTerm=' + escape(request.term),\n                    'Authorization': 'OAuth ' + sid.split('=')[1]\n                }\n            });\n\n            this.tourRequest.done(function(allSearchResults) {\n                console.log(allSearchResults);\n                var data = [];\n                for (i = 0; i < allSearchResults.length; i++) {\n                    data.push({\n                        label: allSearchResults[i].Name,\n                        value: allSearchResults[i].Id\n                    });\n                    console.log(allSearchResults[i].Id);\n                }\n\n                response(data);\n            });\n\n            this.tourRequest.fail(function(jqXHR, textStatus) {\n                console.log(\"Request failed: \" + textStatus + \"could not load tours\");\n            });\n           \n        }\n    });\n} //attachUI\n\n\n\n\n\n\n\n/*\n//Salesforce.com AJAX api\n            var cb = function(result) {\n                console.log(result);\n                \n                if (!result.searchRecords) {\n                    response([]);\n                    return;\n                }\n                \n                if (typeof result.searchRecords.length == \"undefined\" ) {\n                    allSearchResults = [result.searchRecords];   \n                } else {\n                    allSearchResults = result.searchRecords;                       \n                }\n                var data = [];\n                for (i = 0; i < allSearchResults.length; i++) {\n                    data.push({\n                        label: allSearchResults[i].record.Name,\n                        value: allSearchResults[i].record.Id\n                    });\n                    console.log(allSearchResults[i].record.Id);\n                }\n\n                response(data);                \n                \n            };\n            \n            \n            \n            sforce.connection.search('FIND {' + request.term + '*} in all fields RETURNING Account(Name,Id)', cb);\n            */\n/*\n\nerrcb = function(jqXHR, textStatus, errorThrown) {console.log('err'); console.log(jqXHR);}\n\n\n$.ajax({\n                url: \"/services/proxy\",\n                type: \"GET\",\n                dataType: \"json\",\n                context: this,\n                error: errcb,\n                headers: {\n                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest',\n                    'Authorization': 'OAuth ' +  + sid.split('=')[1]\n                }\n            });\n           \njQuery.ajax({\n    url: 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest',\n    error: errcb,\n    headers: {\n        \"Authorization\": \"OAuth 00DA0000000Awxo!AQUAQFCDovgjGFnYcjBEEmuC6n8RRbgA2qBHaJurRHgdUZtF9wISrXSwrrIFPv3D2iG0_lrceKmalAZ9TrKwXqD8_hgt6rrA\"\n    }\n});\n*/ "]],"start1":0,"start2":0,"length1":0,"length2":6077}]],"length":6077}
{"contributors":[],"silentsave":false,"ts":1349254001585,"patch":[[{"diffs":[[0,"   \n    "],[-1,"\n    "],[1,"//"],[0,"window.w"]],"start1":202,"start2":202,"length1":21,"length2":18},{"diffs":[[0,"\n\n\n\n    "],[-1,"$(\"#con4\""],[1,"\nautocompleteselector\n//    $(\"#con4, #cas3, #cas4, #ctrc7\").autocomplete({\n    $(autocompleteselector"],[0,").autoco"]],"start1":1955,"start2":1955,"length1":25,"length2":118},{"diffs":[[0,"m);\n"],[-1,"//            $(\"#con4\").val(ui.item.label);\n"],[0,"    "]],"start1":2171,"start2":2171,"length1":53,"length2":8},{"diffs":[[0,"l);\n"],[-1,"//            $(\"#con4\").val(ui.item.label);\n"],[0,"    "]],"start1":2327,"start2":2327,"length1":53,"length2":8},{"diffs":[[0,"e);\n"],[-1,"//            $(\"#con4_lkid\").val(ui.item.value);\n\n"],[0,"    "]],"start1":2415,"start2":2415,"length1":59,"length2":8},{"diffs":[[0,"Name)',\n"],[1,"//"],[0,"        "]],"start1":3071,"start2":3071,"length1":16,"length2":18},{"diffs":[[0,"st.term)"],[1," + '&fieldId=con4',\n                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest?searchTerm=' + escape(request.term) + '&fieldId=' + $(this.element).attr('id')"],[0,",\n      "]],"start1":3232,"start2":3232,"length1":16,"length2":238},{"diffs":[[0,"ults[i]."],[-1,"Name"],[1,"label"],[0,",\n      "]],"start1":3845,"start2":3845,"length1":20,"length2":21},{"diffs":[[0,"ults[i]."],[-1,"I"],[1,"i"],[0,"d\n      "]],"start1":3903,"start2":3903,"length1":17,"length2":17},{"diffs":[[0,"ults[i]."],[-1,"I"],[1,"i"],[0,"d);\n    "]],"start1":3982,"start2":3982,"length1":17,"length2":17}]],"length":6251,"saved":false}
{"ts":1349254140544,"patch":[[{"diffs":[[0,"\n\n\n    \n"],[-1,"autocompleteselector"],[0,"\n//    $"]],"start1":1956,"start2":1956,"length1":36,"length2":16}]],"length":6231,"saved":false}
{"contributors":[],"silentsave":true,"ts":1349254214272,"patch":[[{"diffs":[[0,"           a"],[-1,"pp"],[1,"tt"],[0,"achUI();\n   "]],"start1":1308,"start2":1308,"length1":26,"length2":26},{"diffs":[[0,"     //a"],[-1,"pp"],[1,"tt"],[0,"achUI();"]],"start1":1346,"start2":1346,"length1":18,"length2":18},{"diffs":[[0,");\n    a"],[-1,"pp"],[1,"tt"],[0,"achUI();"]],"start1":1370,"start2":1370,"length1":18,"length2":18},{"diffs":[[0,"nction a"],[-1,"pp"],[1,"tt"],[0,"achUI() "]],"start1":1397,"start2":1397,"length1":18,"length2":18}]],"length":6231,"saved":false}
{"ts":1349254270986,"patch":[[{"diffs":[[0," });"],[-1,"\n    attachUI();"],[0,"\n\n})"]],"start1":1368,"start2":1368,"length1":24,"length2":8}]],"length":6215,"saved":false}
{"ts":1349254274486,"patch":[[{"diffs":[[0,"unction() {\n"],[1,"        attachUI();\n\n"],[0,"    //$('#ca"]],"start1":3,"start2":3,"length1":24,"length2":45}]],"length":6236,"saved":false}
{"ts":1349254276133,"patch":[[{"diffs":[[0,"unction() {\n"],[-1,"    "],[0,"    attachUI"]],"start1":3,"start2":3,"length1":28,"length2":24}]],"length":6232,"saved":false}
{"ts":1349254328338,"patch":[[{"diffs":[[0,"g($("],[-1,"\"#con4\""],[1,"autocompleteselector"],[0,"));\n"]],"start1":1855,"start2":1855,"length1":15,"length2":28}]],"length":6245,"saved":false}
{"ts":1349254331267,"patch":[[{"diffs":[[0,"ctor));\n"],[1,"    console.log($(autocompleteselector));\n"],[0,"\n\n    sf"]],"start1":1875,"start2":1875,"length1":16,"length2":58}]],"length":6287,"saved":false}
{"ts":1349254335252,"patch":[[{"diffs":[[0,"    console.log("],[-1,"$("],[0,"autocompletesele"]],"start1":1841,"start2":1841,"length1":34,"length2":32}]],"length":6285,"saved":false}
{"ts":1349254336543,"patch":[[{"diffs":[[0,"elector)"],[-1,")"],[0,";\n    co"]],"start1":1870,"start2":1870,"length1":17,"length2":16}]],"length":6284,"saved":false}
{"contributors":[],"silentsave":true,"ts":1349343498299,"patch":[[{"diffs":[[0,"tr('id')"],[1,"+ '&fieldId='"],[0,",\n      "]],"start1":3487,"start2":3487,"length1":16,"length2":29}]],"length":6297,"saved":false}
{"ts":1349343501995,"patch":[[{"diffs":[[0,"id')+ '&"],[-1,"fieldId"],[1,"restriction"],[0,"=',\n    "]],"start1":3491,"start2":3491,"length1":23,"length2":27}]],"length":6301,"saved":false}
{"ts":1349343628071,"patch":[[{"diffs":[[0,"riction="],[1,"001A000000ZvYBd"],[0,"',\n     "]],"start1":3503,"start2":3503,"length1":16,"length2":31}]],"length":6316,"saved":false}
{"ts":1349344129618,"patch":[[{"diffs":[[0,"ion="],[-1,"001A000000ZvYBd"],[0,"'"],[1," "],[0,",\n  "]],"start1":3507,"start2":3507,"length1":24,"length2":10}]],"length":6302,"saved":false}
{"ts":1349344130804,"patch":[[{"diffs":[[0,"ction=' "],[1,"+ $('#cas4_lkid').val()"],[0,",\n      "]],"start1":3505,"start2":3505,"length1":16,"length2":39}]],"length":6325,"saved":false}
{"ts":1349346754129,"patch":[[{"diffs":[[0,"        "],[1,"\n            va"],[0,"\n\n      "]],"start1":2573,"start2":2573,"length1":16,"length2":31}]],"length":6340,"saved":false}
{"ts":1349346755188,"patch":[[{"diffs":[[0,"      va"],[1,"r re"],[0,"\n\n      "]],"start1":2588,"start2":2588,"length1":16,"length2":20}]],"length":6344,"saved":false}
{"ts":1349346756330,"patch":[[{"diffs":[[0,"  var re"],[1,"st"],[0,"\n\n      "]],"start1":2592,"start2":2592,"length1":16,"length2":18}]],"length":6346,"saved":false}
{"ts":1349346759325,"patch":[[{"diffs":[[0,"var rest"],[1,"riction"],[0,"\n\n      "]],"start1":2594,"start2":2594,"length1":16,"length2":23}]],"length":6353,"saved":false}
{"ts":1349346760807,"patch":[[{"diffs":[[0,"triction"],[1," = "],[0,"\n\n      "]],"start1":2601,"start2":2601,"length1":16,"length2":19}]],"length":6356,"saved":false}
{"ts":1349346767172,"patch":[[{"diffs":[[0,"ction = "],[1,"restrictionFuncMap "],[0,"\n\n      "]],"start1":2604,"start2":2604,"length1":16,"length2":35}]],"length":6375,"saved":false}
{"ts":1349346768292,"patch":[[{"diffs":[[0,"nFuncMap"],[-1," "],[0,"\n\n      "]],"start1":2622,"start2":2622,"length1":17,"length2":16}]],"length":6374,"saved":false}
{"ts":1349346769760,"patch":[[{"diffs":[[0,"nFuncMap"],[1,"["],[0,"\n\n      "]],"start1":2622,"start2":2622,"length1":16,"length2":17}]],"length":6375,"saved":false}
{"ts":1349346772129,"patch":[[{"diffs":[[0,"FuncMap["],[1,"''"],[0,"\n\n      "]],"start1":2623,"start2":2623,"length1":16,"length2":18}]],"length":6377,"saved":false}
{"ts":1349346776073,"patch":[[{"diffs":[[0,"ncMap[''"],[1,"]"],[0,"\n\n      "]],"start1":2625,"start2":2625,"length1":16,"length2":17}]],"length":6378,"saved":false}
{"ts":1349346781206,"patch":[[{"diffs":[[0,"cMap['']"],[1,"();"],[0,"\n\n      "]],"start1":2626,"start2":2626,"length1":16,"length2":19}]],"length":6381,"saved":false}
{"ts":1349346801700,"patch":[[{"diffs":[[0,");\n            \n"],[1,"            fieldId=' + $(this.element).attr('id')\n"],[0,"            var "]],"start1":2566,"start2":2566,"length1":32,"length2":83}]],"length":6432,"saved":false}
{"ts":1349346804767,"patch":[[{"diffs":[[0,"        "],[1,"var "],[0,"fieldId="]],"start1":2586,"start2":2586,"length1":16,"length2":20}]],"length":6436,"saved":false}
{"ts":1349346809360,"patch":[[{"diffs":[[0,"    var fieldId="],[-1,"' +"],[0," $(this.element)"]],"start1":2590,"start2":2590,"length1":35,"length2":32}]],"length":6433,"saved":false}
{"ts":1349346810843,"patch":[[{"diffs":[[0," fieldId"],[1," "],[0,"= $(this"]],"start1":2597,"start2":2597,"length1":16,"length2":17}]],"length":6434,"saved":false}
{"ts":1349346814557,"patch":[[{"diffs":[[0,"tr('id')"],[1,";"],[0,"\n       "]],"start1":2626,"start2":2626,"length1":16,"length2":17}]],"length":6435,"saved":false}
{"ts":1349346827732,"patch":[[{"diffs":[[0,"' + "],[-1,"$(this.element).attr('id')"],[1,"fieldId "],[0,"+ '&"]],"start1":3575,"start2":3575,"length1":34,"length2":16}]],"length":6417,"saved":false}
{"ts":1349346836335,"patch":[[{"diffs":[[0,"FuncMap["],[-1,"''"],[1,"fieldId"],[0,"]();\n\n  "]],"start1":2677,"start2":2677,"length1":18,"length2":23}]],"length":6422,"saved":false}
{"ts":1349346845802,"patch":[[{"diffs":[[0,"' + "],[-1,"$('#cas4_lkid').val()"],[1,"restriction"],[0,",\n  "]],"start1":3608,"start2":3608,"length1":29,"length2":19}]],"length":6412,"saved":false}
{"ts":1349351831283,"patch":[[{"diffs":[[0,"rmission();\n"],[1,"/*"],[0,"    \n    $('"]],"start1":265,"start2":265,"length1":24,"length2":26}]],"length":6414,"saved":false}
{"ts":1349351833516,"patch":[[{"diffs":[[0,"    });\n"],[1,"*/"],[0,"\n\n    wi"]],"start1":1079,"start2":1079,"length1":16,"length2":18}]],"length":6416,"saved":false}
{"ts":1349351854782,"patch":[[{"diffs":[[0,"();\n"],[-1,"/*    \n"],[0,"    "]],"start1":273,"start2":273,"length1":15,"length2":8}]],"length":6409,"saved":false}
{"ts":1349351856482,"patch":[[{"diffs":[[0,"ttachUI();\n\n"],[1,"/*    \n"],[0,"    //$('#ca"]],"start1":20,"start2":20,"length1":24,"length2":31}]],"length":6416,"saved":false}
{"contributors":[],"silentsave":true,"ts":1349353433927,"patch":[[{"diffs":[[0,"() {"],[-1,"\n    attachUI();"],[0,"\n\n/*"]],"start1":10,"start2":10,"length1":24,"length2":8}]],"length":6400,"saved":false}
{"ts":1349353437957,"patch":[[{"diffs":[[0,"    });\n"],[-1,"*/"],[0,"\n\n    wi"]],"start1":1063,"start2":1063,"length1":18,"length2":16}]],"length":6398,"saved":false}
{"ts":1349353440369,"patch":[[{"diffs":[[0," {\n\n"],[-1,"/*    \n"],[0,"    "]],"start1":12,"start2":12,"length1":15,"length2":8}]],"length":6391,"saved":false}
{"ts":1349353446757,"patch":[[{"diffs":[[0,");\n\n"],[-1,"function attachUI() {\n//    $('#con9_ileinner').wrapInner('<nobr title=\"sipgate Click2Dial for (650)8677686 (Singapore)\" class=\"sipgateGCXClick2DialBubble\" />').append('<img src=\"https://c9.io/tsschnoc/gapps_script_shared/workspace/sf_autocompl/icon_click2dial.gif\" class=\"sipgateGCXClick2DialBubbleIMG\">')\n    var sid = _.find(document.cookie.split('; '), function(c) {\n        return c.substring(0, 3) == \"sid\";\n    });\n\n    console.log(sid);\n    console.log(autocompleteselector);\n    console.log($(autocompleteselector));\n\n\n    sforce.connection.sessionId=sid.split('=')[1];\n    \n    var cache = {}, lastXhr;\n\n\n\n    \n\n//    $(\"#con4, #cas3, #cas4, #ctrc7\").autocomplete({\n    $(autocompleteselector).autocomplete({\n        minLength: 2,\n        focus: function(event, ui) {\n            console.log(ui.item);\n            $(this).val(ui.item.label);\n            return false;\n        },\n\n        select: function(event, ui) {\n            $(this).val(ui.item.label);\n            $(this).parent().parent().find('#' + this.id + '_lkid').val(ui.item.value);\n            return false;\n        },\n\n\n        source: function(request, response) {\n            console.log('req');\n            \n            var fieldId = $(this.element).attr('id');\n            var restriction = restrictionFuncMap[fieldId]();\n\n            var term = request.term;\n            if (term in cache) {\n                response(cache[term]);\n                return;\n            }\n\n            this.tourRequest = $.ajax({\n                url: \"/services/proxy\",\n                type: \"GET\",\n                dataType: \"json\",\n                context: this,\n                headers: {\n//                    'SalesforceProxy-Endpoint': 'https://na11.salesforce.com/services/data/v25.0/search?q=FIND+{' + request.term + '*}+IN+ALL+FIELDS+RETURNING+ACCOUNT(Id,Name)',\n//                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest?searchTerm=' + escape(request.term) + '&fieldId=con4',\n                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest?searchTerm=' + escape(request.term) + '&fieldId=' + fieldId + '&restriction=' + restriction,\n                    'Authorization': 'OAuth ' + sid.split('=')[1]\n                }\n            });\n\n            this.tourRequest.done(function(allSearchResults) {\n                console.log(allSearchResults);\n                var data = [];\n                for (i = 0; i < allSearchResults.length; i++) {\n                    data.push({\n                        label: allSearchResults[i].label,\n                        value: allSearchResults[i].id\n                    });\n                    console.log(allSearchResults[i].id);\n                }\n\n                response(data);\n            });\n\n            this.tourRequest.fail(function(jqXHR, textStatus) {\n                console.log(\"Request failed: \" + textStatus + \"could not load tours\");\n            });\n           \n        }\n    });\n} //attachUI\n\n\n\n\n\n\n\n/*\n//Salesforce.com AJAX api\n            var cb = function(result) {\n                console.log(result);\n                \n                if (!result.searchRecords) {\n                    response([]);\n                    return;\n                }\n                \n                if (typeof result.searchRecords.length == \"undefined\" ) {\n                    allSearchResults = [result.searchRecords];   \n                } else {\n                    allSearchResults = result.searchRecords;                       \n                }\n                var data = [];\n                for (i = 0; i < allSearchResults.length; i++) {\n                    data.push({\n                        label: allSearchResults[i].record.Name,\n                        value: allSearchResults[i].record.Id\n                    });\n                    console.log(allSearchResults[i].record.Id);\n                }\n\n                response(data);                \n                \n            };\n            \n            \n            \n            sforce.connection.search('FIND {' + request.term + '*} in all fields RETURNING Account(Name,Id)', cb);\n            */\n/*\n\nerrcb = function(jqXHR, textStatus, errorThrown) {console.log('err'); console.log(jqXHR);}\n\n\n$.ajax({\n                url: \"/services/proxy\",\n                type: \"GET\",\n                dataType: \"json\",\n                context: this,\n                error: errcb,\n                headers: {\n                    'SalesforceProxy-Endpoint': 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest',\n                    'Authorization': 'OAuth ' +  + sid.split('=')[1]\n                }\n            });\n           \njQuery.ajax({\n    url: 'https://testitest-developer-edition--c.na11.visual.force.com/apex/jsonTest',\n    error: errcb,\n    headers: {\n        \"Authorization\": \"OAuth 00DA0000000Awxo!AQUAQFCDovgjGFnYcjBEEmuC6n8RRbgA2qBHaJurRHgdUZtF9wISrXSwrrIFPv3D2iG0_lrceKmalAZ9TrKwXqD8_hgt6rrA\"\n    }\n});\n*/ "]],"start1":1371,"start2":1371,"length1":5020,"length2":4}]],"length":1375,"saved":false}
{"ts":1349353452733,"patch":[[{"diffs":[[0,"ion() {\n"],[-1,"\n"],[0,"    //$("]],"start1":7,"start2":7,"length1":17,"length2":16}]],"length":1374,"saved":false}
